!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b:a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g=parseInt(g[1],10),g>=1&&8>g&&(d.isOldIOSPhone=!0)}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&4.4>i?d.isOldAndroid=!0:i>=5&&(d.isNewAndroid=!0),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;4>n;n++){c=m[n];for(var o=0;3>o;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=0;g<b.length;g++)if(e=b[g])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=function(){c.handleEvent.call(c)};a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,scaleMode:"fit",modal:!0,alwaysFadeIn:!1};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb=function(){return{x:0,y:0}},tb=0,ub=sb(),vb=sb(),wb=sb(),xb=sb(),yb={},zb=0,Ab=0,Bb=sb(),Cb=0,Db=!0,Eb=[],Fb={},Gb=function(a,b){e.extend(f,b.publicMethods),Eb.push(a)},Hb=function(a){var b=qb();return a>b-1?a-b:0>a?b+a:a},Ib={},Jb=function(a,b){return Ib[a]||(Ib[a]=[]),Ib[a].push(b)},Kb=function(a){var b=Ib[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Lb=function(){return(new Date).getTime()},Mb=function(a){jb=a,f.bg.style.opacity=a*i.bgOpacity},Nb=function(a,b,c,d){a[E]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Ob=function(){db&&Nb(db,wb.x,wb.y,s)},Pb=function(a){Nb(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel)},Qb=function(a,b){b[E]=u+a+"px, 0px"+v},Rb=function(a,b){if(!i.loop&&b){var c=m+(Bb.x*zb-a)/Bb.x,d=Math.round(a-uc.x);(0>c&&d>0||c>=qb()-1&&0>d)&&(a=uc.x+d*i.mainScrollEndFriction)}uc.x=a,Qb(a,n)},Sb=function(a){return 1/bb*a*t},Tb=function(a,b){var c=vc[a]-gb[a];return vb[a]+ub[a]+c-c*(b/t)},Ub=function(a,b){return a.x===b.x&&a.y===b.y},Vb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},Wb=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Xb=function(){e.bind(document,"keydown keyup",f),i.mouseUsed||e.bind(document,"mousemove",$b),e.bind(window,"resize scroll",f),Kb("bindEvents")},Yb=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown keyup",f),e.unbind(document,"mousemove",$b),U&&e.unbind(window,p,f),Kb("unbindEvents")},Zb=null,$b=function(){Zb&&(e.unbind(document,"mousemove",$b),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Kb("mouseUsed")),Zb=setTimeout(function(){Zb=null},100)},_b=function(a,b){var c=Yc(f.currItem,yb,a);return b&&(cb=c),c},ac=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Tb(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]?(c[a]=b.max[a],!0):!1)},bc={},cc=0,dc=function(a){bc[a]&&(bc[a].raf&&I(bc[a].raf),cc--,delete bc[a])},ec=function(a){bc[a]&&dc(a),bc[a]||(cc++,bc[a]={})},fc=function(){for(var a in bc)bc.hasOwnProperty(a)&&dc(a)},gc=function(a,b,c,d,e,f,g){var h,i=Lb();ec(a);var j=function(){if(bc[a]){if(h=Lb()-i,h>=d)return dc(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),bc[a].raf=H(j)}};j()},hc=function(b,c,d,f){O&&clearTimeout(O),ob=!0,nb=!0;var g;b.initialLayout?(g=b.initialLayout,b.initialLayout=null):g=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var h=function(){dc("initialZoom"),d||(Mb(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Kb("initialZoomInEnd")),f&&f(),ob=!1},j=d?i.hideAnimationDuration:i.showAnimationDuration;return g&&void 0!==g.x&&j?(b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=g.w/b.w,wb.x=g.x,wb.y=g.y-K,i.showHideOpacity&&(a.style.opacity=.001,a.style.webkitBackfaceVisibility="hidden"),Ob()),ec("initialZoom"),d&&!l&&e.removeClass(a,"pswp--animated-in"),O=setTimeout(function(){if(Kb("initialZoom"+(d?"Out":"In")),d){var c=g.w/b.w,f={x:wb.x,y:wb.y},k=s,m=K,n=jb,o=function(b){x&&(m=e.getScrollY(),x=!1),1===b?(s=c,wb.x=g.x,wb.y=g.y-m,l&&h()):(s=(c-k)*b+k,wb.x=(g.x-f.x)*b+f.x,wb.y=(g.y-m-f.y)*b+f.y),Ob(),i.showHideOpacity?a.style.opacity=1-b:Mb(n-b*n)};l?gc("initialZoom",0,1,j,e.easing.cubic.out,o):(o(1),O=setTimeout(h,j+20))}else s=b.initialZoomLevel,Wb(wb,b.initialPosition),Ob(),Mb(1),i.showHideOpacity?a.style.opacity=1:Mb(1),O=setTimeout(h,j+20)},d?25:90),!0):(Kb("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,Wb(wb,b.initialPosition),Ob(),a.style.opacity=d?0:1,Mb(1),h(),!1)},ic={shout:Kb,listen:Jb,viewportSize:yb,options:i,isMainScrollAnimating:function(){return eb},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return U},isZooming:function(){return _},applyZoomPan:function(a,b,c){wb.x=b,wb.y=c,s=a,Ob()},init:function(){if(!j&&!k){var c;if(f.framework=e,f.template=a,f.bg=a.children[0],J=a.className,j=!0,N=e.detectFeatures(),H=N.raf,I=N.caf,E=N.transform,L=N.oldIE,f.scrollWrap=a.children[1],f.container=f.scrollWrap.children[0],n=f.container.style,E){var d=N.perspective&&!G;u="translate"+(d?"3d(":"("),v=N.perspective?", 0px)":")"}else E="left",e.addClass(a,"pswp--ie"),Qb=function(a,b){b.left=a+"px"},Pb=function(a){var b=a.container.style,c=a.fitRatio*a.w,d=a.fitRatio*a.h;b.width=c+"px",b.height=d+"px",b.left=a.initialPosition.x+"px",b.top=a.initialPosition.y+"px"},Ob=function(){if(db){var a=db,b=f.currItem,c=b.fitRatio*b.w,d=b.fitRatio*b.h;a.width=c+"px",a.height=d+"px",a.left=wb.x+"px",a.top=wb.y+"px"}};var g=function(a,b,c,d,e){A=a+b,B=a+c,C=a+d,D=e?a+e:""};for(y=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",F=N.pointerEvent,F&&N.touch&&(N.touch=!1),F?navigator.pointerEnabled?g("pointer","down","move","up","cancel"):g("MSPointer","Down","Move","Up","Cancel"):N.touch?(g("touch","start","move","end","cancel"),G=!0):g("mouse","down","move","up"),p=B+" "+C+" "+D,q=A,F&&!G&&(G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=G,(!N.animationName||!N.transform||N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera)&&(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<Eb.length;c++)f["init"+Eb[c]]();if(b){var t=f.ui=new b(f,e);t.init()}G||(i.allowPanToNext=!1),r={resize:f.updateSize,scroll:function(){x=!0,i.closeOnScroll&&j&&(!f.likelyTouchDevice||i.mouseUsed)&&Math.abs(e.getScrollY()-K)>2&&(l=!0,f.close())},keyup:function(a){i.escKey&&27===a.keyCode&&f.close()},keydown:function(a){i.arrowKeys&&(37===a.keyCode?f.prev():39===a.keyCode&&f.next())}},r[A]=Mc,r[B]=Nc,r[C]=Pc,D&&(r[D]=r[C]),N.touch&&(q+=" mousedown",p+="mousemove mouseup",r.mousedown=r[A],r.mousemove=r[B],r.mouseup=r[C]),Kb("firstUpdate"),m=m||i.index||0,(isNaN(m)||0>m||m>=qb())&&(m=0),f.currItem=pb(m),(N.isOldIOSPhone||N.isOldAndroid)&&(Db=!1),i.modal&&(a.setAttribute("aria-hidden","false"),Db?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===M&&(Kb("initialLayout"),M=K=e.getScrollY());var z="pswp--open ";for(i.mainClass&&(z+=i.mainClass+" "),i.showHideOpacity&&(z+="pswp--animate_opacity "),z+=G?"pswp--touch":"pswp--notouch",z+=N.animationName?" pswp--css_animation":"",z+=N.svg?" pswp--svg":"",e.addClass(a,z),f.updateSize(),o=-1,Cb=null,c=0;h>c;c++)Qb((c+o)*Bb.x,y[c].el.style);L||e.bind(f.scrollWrap,q,f),Jb("initialZoomInEnd",function(){f.setContent(y[0],m-1),f.setContent(y[2],m+1),y[0].el.style.display=y[2].el.style.display="block",i.focus&&a.focus(),Xb()}),f.setContent(y[1],m),f.updateCurrItem(),Kb("afterInit"),Db||(w=setInterval(function(){cc||U||_||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Kb("close"),Yb(),hc(f.currItem,null,!0,f.destroy))},destroy:function(){Kb("destroy"),O&&clearTimeout(O),i.modal&&(a.setAttribute("aria-hidden","true"),a.className=J),w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),yc(),fc(),Ib=null},panTo:function(a,b,c){c||(a>cb.min.x?a=cb.min.x:a<cb.max.x&&(a=cb.max.x),b>cb.min.y?b=cb.min.y:b<cb.max.y&&(b=cb.max.y)),wb.x=a,wb.y=b,Ob()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=Hb(a);var b=a-m;Cb=b,m=a,f.currItem=pb(m),zb-=b,Rb(Bb.x*zb),fc(),eb=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrItem:function(a){if(0!==Cb){var b,c=Math.abs(Cb);if(!(a&&2>c)){f.currItem=pb(m),Kb("beforeChange",Cb),c>=h&&(o+=Cb+(Cb>0?-h:h),c=h);for(var d=0;c>d;d++)Cb>0?(b=y.shift(),y[h-1]=b,o++,Qb((o+2)*Bb.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=y.pop(),y.unshift(b),o--,Qb(o*Bb.x,b.el.style),f.setContent(b,m+c-d-1-1));if(db&&1===Math.abs(Cb)){var g=pb(z);g.initialZoomLevel!==s&&(Yc(g,yb),Pb(g))}if(y[1].el.children.length){var i=y[1].el.children[0];db=e.hasClass(i,"pswp__zoom-wrap")?i.style:null}else db=null;Cb=0,cb=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,wb.x=cb.center.x,wb.y=cb.center.y,z=m,Kb("afterChange")}}},updateSize:function(b){if(!Db){var c=e.getScrollY();if(M!==c&&(a.style.top=c+"px",M=c),!b&&Fb.x===window.innerWidth&&Fb.y===window.innerHeight)return;Fb.x=window.innerWidth,Fb.y=window.innerHeight,a.style.height=Fb.y+"px"}if(yb.x=f.scrollWrap.clientWidth,yb.y=f.scrollWrap.clientHeight,gb={x:0,y:M},Bb.x=yb.x+Math.round(yb.x*i.spacing),Bb.y=yb.y,Rb(Bb.x*zb),void 0!==o)for(var d=0;h>d;d++){Qb((d+o)*Bb.x,y[d].el.style);var g=Hb(m-1+d),j=pb(g);j&&j.container&&(Yc(j,yb),Pb(j))}t=s=f.currItem.initialZoomLevel,cb=f.currItem.bounds,cb&&(wb.x=cb.center.x,wb.y=cb.center.y,Ob()),Kb("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,vc.x=Math.abs(b.x)-wb.x,vc.y=Math.abs(b.y)-wb.y,Wb(vb,wb));var g=_b(a,!1),h={};ac("x",g,h,a),ac("y",g,h,a);var i=s,j={x:wb.x,y:wb.y},k=function(b){1===b?(s=a,wb.x=h.x,wb.y=h.y):(s=(a-i)*b+i,wb.x=(h.x-j.x)*b+j.x,wb.y=(h.y-j.y)*b+j.y),f&&f(b),Ob()};c?gc("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},jc=30,kc=10,lc={},mc={},nc={},oc={},pc={},qc=[],rc={},sc=[],tc={},uc=sb(),vc=sb(),wc=sb(),xc=function(a,b){return tc.x=Math.abs(a.x-b.x),tc.y=Math.abs(a.y-b.y),Math.sqrt(tc.x*tc.x+tc.y*tc.y)},yc=function(){Y&&(I(Y),Y=null)},zc=function(){U&&(Y=H(zc),Oc())},Ac=function(){return!("fit"===i.scaleMode&&s===f.currItem.initialZoomLevel)},Bc={},Cc=function(a,b){return Bc.prevent="A"!==a.target.tagName,Kb("preventDragEvent",a,b,Bc),Bc.prevent},Dc=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Ec=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Fc=function(a,b,c){if(a-Q>50){var d=sc.length>2?sc.shift():{};d.x=b,d.y=c,sc.push(d),Q=a}},Gc=function(){var a=wb.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(yb.y/2))},Hc={},Ic={},Jc=[],Kc=function(a){for(;Jc.length>0;)Jc.pop();return F?(lb=0,qc.forEach(function(a){0===lb?Jc[0]=a:1===lb&&(Jc[1]=a),lb++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Jc[0]=Dc(a.touches[0],Hc),a.touches.length>1&&(Jc[1]=Dc(a.touches[1],Ic))):(Hc.x=a.pageX,Hc.y=a.pageY,Hc.id="",Jc[0]=Hc),Jc},Lc=function(a,b){var c,d,e=0,g=wb[a]+b[a],h=b[a]>0,j=uc.x+b.x,k=uc.x-rc.x;c=g>cb.min[a]||g<cb.max[a]?i.panEndFriction:1,g=wb[a]+b[a]*c;var l,m;return!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(db?"h"!==fb||"x"!==a||W||(h?(g>cb.min[a]&&(c=i.panEndFriction,e=cb.min[a]-g,d=cb.min[a]-vb[a]),(0>=d||0>k)&&qb()>1?(m=j,0>k&&j>rc.x&&(m=rc.x)):cb.min.x!==cb.max.x&&(l=g)):(g<cb.max[a]&&(c=i.panEndFriction,e=g-cb.max[a],d=vb[a]-cb.max[a]),(0>=d||k>0)&&qb()>1?(m=j,k>0&&j<rc.x&&(m=rc.x)):cb.min.x!==cb.max.x&&(l=g))):m=j,"x"!==a)?void(eb||Z||s>f.currItem.fitRatio&&(wb[a]+=b[a]*c)):(void 0!==m&&(Rb(m,!0),Z=m===rc.x?!1:!0),cb.min.x!==cb.max.x&&(void 0!==l?wb.x=l:Z||(wb.x+=b.x*c)),void 0!==m)},Mc=function(a){if(ob)return void a.preventDefault();if(Cc(a,!0)&&a.preventDefault(),Kb("pointerDown"),F){var b=e.arraySearch(qc,a.pointerId,"id");0>b&&(b=qc.length),qc[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Kc(a),d=c.length;$=null,fc(),U&&1!==d||(U=hb=!0,e.bind(window,p,f),S=kb=ib=T=Z=X=V=W=!1,fb=null,Kb("firstTouchStart",c),Wb(vb,wb),ub.x=ub.y=0,Wb(oc,c[0]),Wb(pc,oc),rc.x=Bb.x*zb,sc=[{x:oc.x,y:oc.y}],Q=P=Lb(),_b(s,!0),yc(),zc()),!_&&d>1&&!eb&&!Z&&(t=s,W=!1,_=V=!0,ub.y=ub.x=0,Wb(vb,wb),Wb(lc,c[0]),Wb(mc,c[1]),Ec(lc,mc,wc),vc.x=Math.abs(wc.x)-wb.x,vc.y=Math.abs(wc.y)-wb.y,ab=bb=xc(lc,mc))},Nc=function(a){if(a.preventDefault(),F){var b=e.arraySearch(qc,a.pointerId,"id");if(b>-1){var c=qc[b];c.x=a.pageX,c.y=a.pageY}}if(U){var d=Kc(a);if(fb||X||_)$=d;else{var f=Math.abs(d[0].x-oc.x)-Math.abs(d[0].y-oc.y);Math.abs(f)>=kc&&(fb=f>0?"h":"v",$=d)}}},Oc=function(){if($){var a=$.length;if(0!==a)if(Wb(lc,$[0]),nc.x=lc.x-oc.x,nc.y=lc.y-oc.y,_&&a>1){if(oc.x=lc.x,oc.y=lc.y,!nc.x&&!nc.y&&Ub($[1],mc))return;Wb(mc,$[1]),W||(W=!0,Kb("zoomGestureStarted"));var b=xc(lc,mc),c=Sb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(kb=!0);var d=1;if(c<f.currItem.minZoom)if(i.pinchToClose&&!kb&&t<=f.currItem.initialZoomLevel){var e=f.currItem.minZoom-c,g=1-e/(f.currItem.minZoom/1.2);Mb(g),Kb("onPinchClose",g),ib=!0}else d=(f.currItem.minZoom-c)/f.currItem.minZoom,d>1&&(d=1),c=f.currItem.minZoom-d*(f.currItem.minZoom/3);else c>f.currItem.maxZoom&&(d=(c-f.currItem.maxZoom)/(6*f.currItem.minZoom),d>1&&(d=1),c=f.currItem.maxZoom+d*f.currItem.minZoom);1!==d&&0>d&&(d=0),ab=b,Ec(lc,mc,xb),ub.x+=xb.x-wc.x,ub.y+=xb.y-wc.y,Wb(wc,xb),wb.x=Tb("x",c),wb.y=Tb("y",c),S=c>s,s=c,Ob()}else{if(!fb)return;if(hb&&(hb=!1,Math.abs(nc.x)>=kc&&(nc.x-=$[0].x-pc.x),Math.abs(nc.y)>=kc&&(nc.y-=$[0].y-pc.y)),oc.x=lc.x,oc.y=lc.y,0===nc.x&&0===nc.y)return;if("v"===fb&&i.closeOnVerticalDrag&&!Ac()){ub.y+=nc.y,wb.y+=nc.y;var h=Gc();return T=!0,Kb("onVerticalDrag",h),Mb(h),void Ob()}Fc(Lb(),lc.x,lc.y),X=!0,cb=f.currItem.bounds;var j=Lc("x",nc);j||Lc("y",nc),Ob()}}},Pc=function(a){Kb("pointerUp"),Cc(a,!1)&&a.preventDefault();var b;if(F){var c=e.arraySearch(qc,a.pointerId,"id");if(c>-1)if(b=qc.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Kc(a),i=h.length;if("mouseup"===a.type&&(i=0),2===i)return $=null,!0;1===i&&Wb(pc,h[0]),0!==i||fb||eb||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Kb("touchRelease",a,b));var j=-1;if(0===i&&(U=!1,e.unbind(window,p,f),yc(),_?j=0:-1!==tb&&(j=Lb()-tb)),tb=1===i?Lb():-1,g=-1!==j&&150>j?"zoom":"swipe",_&&2>i&&(_=!1,1===i&&(g="zoomPointerUp"),Kb("zoomGestureEnded")),$=null,X||W||eb||T)if(fc(),R||(R=Qc()),R.calculateSwipeSpeed("x"),T){var k=Gc();if(.6>k)f.close();else{var l=wb.y,m=jb;gc("verticalDrag",0,1,300,e.easing.cubic.out,function(a){wb.y=(f.currItem.initialPosition.y-l)*a+l,Mb((1-m)*a+m),Ob()}),Kb("onVerticalDrag",1)}}else{if((Z||eb)&&0===i){var n=Sc(g,R);if(n)return;g="zoomPointerUp"}if(!eb)return"swipe"!==g?void Tc():void(!Z&&s>f.currItem.fitRatio&&Rc(R))}},Qc=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){sc.length>1?(a=Lb()-Q+50,b=sc[sc.length-2][d]):(a=Lb()-P,b=pc[d]),c.lastFlickOffset[d]=oc[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickSpeed[d]=c.lastFlickDist[d]>20?c.lastFlickOffset[d]/a:0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(wb[a]>cb.min[a]?c.backAnimDestination[a]=cb.min[a]:wb[a]<cb.max[a]&&(c.backAnimDestination[a]=cb.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,gc("bounceZoomPan"+a,wb[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){wb[a]=b,Ob()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,wb[a]+=c.distanceOffset[a])},panAnimLoop:function(){return bc.zoomPan&&(bc.zoomPan.raf=H(c.panAnimLoop),c.now=Lb(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ob(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05)?void dc("zoomPan"):void 0}};return c},Rc=function(a){return a.calculateSwipeSpeed("y"),cb=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(ec("zoomPan"),a.lastNow=Lb(),void a.panAnimLoop())},Sc=function(a,b){var c;eb||(Ab=m);var d;if("swipe"===a){var g=oc.x-pc.x;g>jc&&(b.lastFlickDist.x<10||b.lastFlickOffset.x>20)?d=-1:-jc>g&&(b.lastFlickDist.x<10||b.lastFlickOffset.x<-20)&&(d=1)}var h;d&&(m+=d,0>m?(m=i.loop?qb()-1:0,h=!0):m>=qb()&&(m=i.loop?0:qb()-1,h=!0),(!h||i.loop)&&(Cb+=d,zb-=d,c=!0));var j,k=Bb.x*zb,l=Math.abs(k-uc.x);return c||k>uc.x==b.lastFlickSpeed.x>0?(j=Math.abs(b.lastFlickSpeed.x)>0?l/Math.abs(b.lastFlickSpeed.x):333,j=Math.min(j,400),j=Math.max(j,250)):j=333,Ab===m&&(c=!1),eb=!0,gc("mainScroll",uc.x,k,j,e.easing.cubic.out,Rb,function(){fc(),eb=!1,Ab=-1,(c||Ab!==m)&&f.updateCurrItem(),Kb("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Tc=function(){var a=s;s<f.currItem.minZoom?a=f.currItem.minZoom:s>f.currItem.maxZoom&&(a=f.currItem.maxZoom);var b,c=1,d=jb;return ib&&!S&&!kb&&s<f.currItem.minZoom?(l=!0,f.close(),!0):(ib&&(b=function(a){Mb((c-d)*a+d)}),f.zoomTo(a,0,300,e.easing.cubic.out,b),!0)},Uc={},Vc={},Wc=[],Xc={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return mb.length}},Yc=function(a,b,c){if(a.src){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Kb("parseVerticalMargin",a)),Uc.x=b.x,Uc.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=Uc.x/a.w,f=Uc.y/a.h;a.fitRatio=f>e?e:f,a.fillRatio=e>f?e:f;var g=i.scaleMode;"orig"==g?c=1:"fit"==g?c=a.fitRatio:"fill"==g&&(c=a.fillRatio),c>1&&(c=1),a.initialZoomLevel=c,a.maxZoom=2,a.doubleTapZoom=2*c>1?2*c:1,a.minZoom=c,a.bounds||(a.bounds={center:{},max:{},min:{}})}if(!c)return;Vc.x=a.w*c,Vc.y=a.h*c;var h=a.bounds;return h.center.x=Math.round((Uc.x-Vc.x)/2),h.center.y=Math.round((Uc.y-Vc.y)/2)+a.vGap.top,h.max.x=Vc.x>Uc.x?Math.round(Uc.x-Vc.x):h.center.x,h.max.y=Vc.y>Uc.y?Math.round(Uc.y-Vc.y)+a.vGap.top:h.center.y,h.min.x=Vc.x>Uc.x?0:h.center.x,h.min.y=Vc.y>Uc.y?a.vGap.top:h.center.y,d&&c===a.initialZoomLevel&&(a.initialPosition=h.center),h}return!1},Zc=function(a,b,c,d,e,g){var h;!e&&(G||i.alwaysFadeIn)&&(a===m||f.isMainScrollAnimating()||f.isDragging()&&!f.isZooming())&&(h=!0),d&&(h&&(d.style.opacity=0),b.imageAppended=!0,c.appendChild(d),h&&setTimeout(function(){d.style.opacity=1,g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500)},50))},$c=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},_c=function(a,b){return a.loadError?(b.el.innerHTML=i.errorMsg.replace("%url%",a.src),!0):void 0},ad=function(){if(Wc.length){for(var a,b=0;b<Wc.length;b++)a=Wc[b],a.holder.index===a.index&&Zc(a.index,a.item,a.baseDiv,a.img);Wc=[]}};Gb("Controller",{publicMethods:{lazyLoadItem:function(a){a=Hb(a);var b=pb(a);!b||b.loaded||b.loading||(Kb("gettingData",a,b),$c(b))},initController:function(){e.extend(i,Xc,!0),f.items=mb=c,pb=f.getItemAt,qb=i.getNumItemsFn,rb=i.loop,qb()<3&&(i.loop=!1),Jb("beforeChange",function(a){var b,c=i.preload,d=null===a?!0:a>0,e=Math.min(c[0],qb()),g=Math.min(c[1],qb());for(b=1;(d?g:e)>=b;b++)f.lazyLoadItem(m+b);for(b=1;(d?e:g)>=b;b++)f.lazyLoadItem(m-b)}),Jb("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Jb("mainScrollAnimComplete",ad),Jb("initialZoomInEnd",ad),Jb("destroy",function(){for(var a,b=0;b<mb.length;b++)a=mb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);Wc=null})},getItemAt:function(a){return a>=0?mb[a]:!1},allowProgressiveImg:function(){return i.forceProgressiveLoading||!G||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=Hb(b));var c,d=f.getItemAt(b);if(d){if(Kb("gettingData",b,d),a.index=b,_c(d,a))return d.initialPosition.x=d.initialPosition.y=0,d.initialZoomLevel=d.maxZoom=d.minZoom=1,db=null,d.w=50,d.h=50,void Pb(d);var g;if(g=e.createEl("pswp__zoom-wrap"),d.container=g,d.loaded)c=e.createEl("pswp__img","img"),c.style.webkitBackfaceVisibility="hidden",c.style.opacity=1,c.src=d.src,Zc(b,d,g,c,!0);else{if(d.loadComplete=function(d){if(j){if(c||(c=d.img),c.style.webkitBackfaceVisibility="hidden",a.index===b){if(_c(d,a))return;d.imageAppended?!ob&&d.placeholder&&(d.placeholder.style.display="none",d.placeholder=null):eb||ob?Wc.push({item:d,baseDiv:g,img:c,index:b,holder:a}):Zc(b,d,g,c,eb||ob)}d.loadComplete=null,Kb("imageLoadComplete",b,d)}},c=d.img,e.features.transform){var h=e.createEl("pswp__img pswp__img--placeholder"+(d.msrc?"":" pswp__img--placeholder--blank"),d.msrc?"img":"");d.msrc&&(h.src=d.msrc),h.style.width=d.w+"px",h.style.height=d.h+"px",g.appendChild(h),d.placeholder=h}d.loading||$c(d),f.allowProgressiveImg()&&(nb?Zc(b,d,g,c||d.img,!0,!0):Wc.push({item:d,baseDiv:g,img:c||d.img,index:b,holder:a}))}Yc(d,yb),nb||b!==m?Pb(d):(db=g.style,hc(d,c)),a.el.innerHTML="",a.el.appendChild(g)}else a.el.innerHTML=""}}});var bd,cd={},dd=function(a,b,c){var d=document.createEvent("CustomEvent");d.initCustomEvent("pswpTap",!0,!0,{origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"}),a.target.dispatchEvent(d)};Gb("Tap",{publicMethods:{initTap:function(){Jb("firstTouchStart",f.onTapStart),Jb("touchRelease",f.onTapRelease),Jb("destroy",function(){cd={},bd=null})},onTapStart:function(a){a.length>1&&(clearTimeout(bd),bd=null)},onTapRelease:function(a,b){if(b&&!X&&!V&&!cc){var c=b;if(bd&&(clearTimeout(bd),bd=null,Vb(c,cd)))return void Kb("doubleTap",c);var d=a.target.tagName.toLowerCase();if("mouse"===b.type)return void dd(a,b,"mouse");if("button"===d||e.hasClass(a.target,"pswp__single-tap"))return void dd(a,b);Wb(cd,c),bd=setTimeout(function(){dd(a,b),bd=null},300)}}}});var ed;Gb("DesktopZoom",{publicMethods:{handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return!0;if(a.preventDefault(),a.stopPropagation(),ed.x=0,"deltaX"in a)ed.x=a.deltaX,ed.y=a.deltaY;else if("wheelDelta"in a)a.wheelDeltaX&&(ed.x=-.16*a.wheelDeltaX),ed.y=a.wheelDeltaY?-.16*a.wheelDeltaY:-.16*a.wheelDelta;else{if(!("detail"in a))return;ed.y=a.detail}_b(s,!0),f.panTo(wb.x-ed.x,wb.y-ed.y)},toggleDesktopZoom:function(b){b=b||{x:yb.x/2,y:yb.y/2+K};var c=1===s;f.mouseZoomedIn=!c,f.zoomTo(c?f.currItem.initialZoomLevel:1,b,333),e[(c?"remove":"add")+"Class"](a,"pswp--zoomed-in")},setupDesktopZoom:function(b){ed={};var c="wheel mousewheel DOMMouseScroll";Jb("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Jb("unbindEvents",function(){ed&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),1>s?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Jb("resize",g),Jb("afterChange",g),Jb("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Jb("pointerUp",h),b||g()},initDesktopZoom:function(){L||(G?Jb("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))}}});var fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd={history:!0,galleryUID:1},rd=function(){return pd.hash.substring(1)},sd=function(){fd&&clearTimeout(fd),hd&&clearTimeout(hd)},td=function(){var a=rd(),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.pid=parseInt(b.pid,10)-1,b.pid<0&&(b.pid=0),b},ud=function(){if(hd&&clearTimeout(hd),cc||U)return void(hd=setTimeout(ud,500));id?clearTimeout(gd):id=!0;var a=ld+"&gid="+i.galleryUID+"&pid="+(m+1);if(md){var b=pd.href.split("#")[0]+"#"+a;pd.replace(b)}else-1===pd.hash.indexOf(a)&&(od=!0),pd.hash=a;md=!0,gd=setTimeout(function(){id=!1},60)};Gb("History",{publicMethods:{initHistory:function(){if(e.extend(i,qd,!0),i.history){pd=window.location,od=!1,nd=!1,md=!1,ld=rd(),ld.indexOf("gid=")>-1&&(ld=ld.split("&gid=")[0],ld=ld.split("?gid=")[0]),Jb("afterChange",f.updateURL),Jb("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){kd=!0,nd||(od?history.back():ld?pd.hash=ld:"pushState"in history?history.pushState("",document.title,pd.pathname+pd.search):pd.hash=""),sd()};Jb("unbindEvents",function(){l&&a()}),Jb("destroy",function(){kd||a()}),Jb("firstUpdate",function(){m=td().pid});var b=ld.indexOf("pid=");b>-1&&(ld=ld.substring(0,b),"&"===ld.slice(-1)&&(ld=ld.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return rd()===ld?(nd=!0,void f.close()):void(id||(jd=!0,f.goTo(td().pid),jd=!1))},updateURL:function(){sd(),jd||(md?fd=setTimeout(ud,800):ud())}}}),e.extend(f,ic)};return a}),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b:a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this,t=!1,u=!0,v=!0,w={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],indexIndicatorSep:" / "},x=function(a){if(o)return!0;a=a||window.event;for(var b,c,d=a.target||a.srcElement,e=d.className,f=0;f<H.length;f++)b=H[f],b.onTap&&e.indexOf("pswp__"+b.name)>-1&&(b.onTap(),c=!0);c&&(a.stopPropagation&&a.stopPropagation(),o=!0,p=setTimeout(function(){o=!1},30))},y=function(){return!a.likelyTouchDevice||a.options.mouseUsed||screen.width>1200},z=function(){return v=!v,v?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){v&&b[(v?"add":"remove")+"Class"](i,"pswp__share-modal--hidden")},300)):(b[(v?"add":"remove")+"Class"](i,"pswp__share-modal--hidden"),setTimeout(function(){v||b.addClass(i,"pswp__share-modal--fade-in")},30)),v||B(),!1},A=function(a){a=a||window.event;var b=a.target||a.srcElement;return b.href?b.hasAttribute("download")?!0:(window.open(b.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),v||z(),!1):!1},B=function(){for(var b,c,d="",e=0;e<a.options.shareButtons.length;e++)b=a.options.shareButtons[e],c=b.url.replace("{{url}}",encodeURIComponent(window.location.href)).replace("{{image_url}}",encodeURIComponent(a.currItem.src||"")).replace("{{raw_image_url}}",a.currItem.src||"").replace("{{text}}",encodeURIComponent(a.currItem.title||"")),d+='<a href="'+c+'" target="_blank" class="pswp__share--'+b.id+'"'+(b.download?"download":"")+">"+b.label+"</a>";i.children[0].innerHTML=d,i.children[0].onclick=A},C=function(c){for(var d=0;d<a.options.closeElClasses.length;d++)if(b.hasClass(c,"pswp__"+a.options.closeElClasses[d]))return!0},D=0,E=function(){clearTimeout(r),D=0,k&&s.setIdle(!1)},F=function(b){b=b?b:window.event;var c=b.relatedTarget||b.toElement;c&&"HTML"!=c.nodeName||(clearTimeout(r),r=setTimeout(function(){s.setIdle(!0)},a.options.timeToIdleOutside))},G=function(a){m!==a&&(b[(a?"remove":"add")+"Class"](l,"pswp__preloader--active"),m=a)},H=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){z()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){z()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()
}},{name:"preloader",option:"preloaderEl",onInit:function(a){l=a}}];s.init=function(){b.extend(a.options,w,!0),d=a.scrollWrap.children[1];var g=a.listen;g("onVerticalDrag",function(a){u&&.95>a?s.hideControls():!u&&a>=.95&&s.showControls()});var j;g("onPinchClose",function(a){u&&.9>a?(s.hideControls(),j=!0):j&&!u&&a>.9&&s.showControls()}),g("zoomGestureEnded",function(){j=!1,j&&!u&&s.showControls()}),g("beforeChange",s.update),g("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(a.currItem.doubleTapZoom,b,333)}),g("bindEvents",function(){b.bind(d,"pswpTap click",x),b.bind(a.scrollWrap,"pswpTap",s.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",s.onMouseOver)}),a.options.timeToIdle&&g("mouseUsed",function(){b.bind(document,"mousemove",E),b.bind(document,"mouseout",F),q=setInterval(function(){D++,2===D&&s.setIdle(!0)},a.options.timeToIdle/2)}),g("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.className&&a.type.indexOf("mouse")>-1&&(d.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),g("unbindEvents",function(){v||z(),q&&clearInterval(q),b.unbind(document,"mouseout",F),b.unbind(document,"mousemove",E),b.unbind(d,"pswpTap click",x),b.unbind(a.scrollWrap,"pswpTap",s.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",s.onMouseOver),c&&(b.unbind(document,c.eventK,s.updateFullscreen),c.isFullscreen()&&(w.hideAnimationDuration=0,c.exit()),c=null)}),g("destroy",function(){a.options.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),s.setIdle(!1)}),a.options.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),g("initialZoomIn",function(){a.options.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),g("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),g("parseVerticalMargin",function(c){var g=c.vGap;if(y()){var h=a.options.barsSize;if(a.options.captionEl&&"auto"===h.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),a.options.addCaptionHTMLFn(c,f,!0)){var i=f.clientHeight;g.bottom=parseInt(i,10)||44}else g.bottom=h.top;else g.bottom=h.bottom;g.top=h.top}else g.top=g.bottom=0});var k,l,m,o=function(c){for(var d=c.length,e=0;d>e;e++){k=c[e],l=k.className;for(var f=0;f<H.length;f++)m=H[f],l.indexOf("pswp__"+m.name)>-1&&(a.options[m.option]?(b.removeClass(k,"pswp__element--disabled"),m.onInit&&m.onInit(k)):b.addClass(k,"pswp__element--disabled"))}};o(d.children),o(d.children[0].children),a.options.shareEl&&h&&i&&(v=!0),a.options.fullscreenEl&&(c||(c=s.getFullscreenAPI()),c?(b.bind(document,c.eventK,s.updateFullscreen),s.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs")),a.options.preloaderEl&&(G(!0),g("beforeChange",function(){clearTimeout(n),n=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&G(!1):G(!0)},a.options.loadingIndicatorDelay)}),g("imageLoadComplete",function(b,c){a.currItem===c&&G(!0)}))},s.setIdle=function(a){k=a,b[(a?"add":"remove")+"Class"](d,"pswp__ui--idle")},s.update=function(){u&&a.currItem?(s.updateIndexIndicator(),a.options.captionEl&&(a.options.addCaptionHTMLFn(a.currItem,e),a.currItem.title?b.removeClass(e,"pswp__caption--empty"):b.addClass(e,"pswp__caption--empty")),t=!0):t=!1},s.updateFullscreen=function(){b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},s.updateIndexIndicator=function(){a.options.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+a.options.indexIndicatorSep+a.options.getNumItemsFn())},s.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!o)if(c.detail&&"mouse"===c.detail.pointerType)C(d)&&a.close(),b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?a.close():a.toggleDesktopZoom(c.detail.releasePoint));else if(a.options.tapToToggleControls&&(u?s.hideControls():s.showControls()),a.options.tapToClose&&(b.hasClass(d,"pswp__img")||C(d)))return void a.close()},s.onMouseOver=function(a){a=a||window.event;var c=a.target||a.srcElement;C(c)?b.addClass(d,"pswp__ui--over-close"):b.removeClass(d,"pswp__ui--over-close")},s.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),u=!1},s.showControls=function(){u=!0,t||s.update(),b.removeClass(d,"pswp__ui--hidden")},s.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},s.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=a.options.closeOnScroll,a.options.closeOnScroll=!1,a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return a.options.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a}),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();